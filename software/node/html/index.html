<!DOCTYPE html>
<html>
  <head>
    <title>nanoaltair.io</title>
    <style>
	  html { height: 100%; }
      body { margin: 0; height:100%; width: 100%; font-family: monospace; }

	  #window { 
		  width: 100%;
		  height: 100%;
	  }
	  
      #messages { margin: 0; padding: 0; white-space: pre; }
	  #button_div {
		  position: fixed;
		  bottom: 10%;
		  right: 10%;
	  }
	  .control_button {
	
	  }
    </style>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
  <body>
	<div id="window">
      <p id="messages"></p>
	  <div id="button_div">
		<button id="reset_button" class="control_button">
		  Reset
		</button>
	  </div>
	</div>
	
	<script src="/socket.io/socket.io.js"></script>
	<script>
	  var socket = io();

	  var messages = document.getElementById('messages');

	  document.addEventListener('keydown', function(e) {
		  e.preventDefault();
		  if(e.key == 'Enter')
		  {
			  socket.emit('TERM', '\r\n');
		  }
		  else
		  {
			  if(e.key.length == 1)
			  {
				  socket.emit('TERM', e.key);
			  }
		  }
	  });
	  
	  socket.on('TERM', function(msg) {
		messages.textContent += msg;
		window.scrollTo(0, document.body.scrollHeight);
	  });

	  $("#reset_button").click(function(){
		$.ajax({url: "/control/reset"});
	  });
	</script>
  </body>
</html>
